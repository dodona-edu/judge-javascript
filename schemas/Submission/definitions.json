{
    "$schema": "http://json-schema.org/draft-03/schema#",
    "id-online": "http://dodona.ugent.be/schemas/1.0/Submission/definitions.json",
    "title": "definitions",
    "description": "Helper definitions for defining TestGroup, Test and Message schemas.",
    "Base": {
        "type": "object",
  	    "properties": {
	        "description": {
	            "description": "Short description of the test or the testgroup.",
	            "oneOf": [
	                {
	                    "type": "string"
	                },
	                {
	                    "$ref": "message.json#" 
	                }
	            ]
	        },
            "messages": {
                "description": "List of messages.",
                "type": "array",
                "items": {
                    "$ref": "message.json#"
                }
            },
            "data": {
                "description": "Additional key/value pairs.",
                "type": "object"
            }
	    }
    },
    "Acceptance": {
        "type": "object",
        "properties": {
	        "accepted": {
	            "description": "Are all contained tests accepted?",
	            "type": "boolean",
	            "default": true
	        },
	        "status": {
	            "description": "Status code for the overall acceptance of all contained tests.",
	            "type": "string",
	            "default": "correct answer"
	        },
	        "score": {
	            "description": "Total score obtained for all contained tests.",
	            "type": "number",
	            "minimum": 0.0
	        },
	        "maximal_score": {
	            "description": "Maximal score obtainable for all contained tests.",
	            "type": "number",
	            "minimum": 0.0
	        }
	    },
	    "required": [
	        "accepted",
	        "status"
	    ]
	},
    "Access": {
        "type": "object",
        "properties": {
            "permission": {
                "description": "Configuration of users that can access this object (visible to all by default).",
                "type": "string",
                "enum": ["student", "staff", "zeus", "admin"]
            }
        }
    },
    "RuntimeMetrics": {
        "type": "object",
        "properties": {
            "runtime_metrics": {
                "type": "object",
                "properties": {
		            "wall_time": {
		                "description": "Wall-clock time of running the processes expressed in seconds.",
		                "type": "number",
		                "minimum": 0.0,
		                "default": 0.0
		            },
		            "peak_memory": {
		                "description": "Peak memory consumed when running the processed expressed in bytes.",
                        "type": "integer",
                        "minimum": 0,
                        "default": 0
		            }
                }
            }
        }
    },
    "Representation": {
        "type": "object",
        "properties": {
            "data": {
		        "type": "object",
		        "properties": {
		            "show_stacked": {
		                "description": "Show stacked version of tests by default?",
		                "type": "boolean",
		                "default": false
		            },
		            "show_merged": {
		                "description": "Show merged version of tests by default?",
		                "type": "boolean",
		                "default": false
		            },
		            "show_accepted": {
		                "description": "Show tests that are accepted by default?",
		                "type": "boolean",
		                "default": true
		            },
		            "show_line_numbers": {
		                "description": "Show line numbers of tests by default?",
		                "type": "boolean",
		                "default": true
		            },
		            "toggle_accepted": {
		                "description": "Enable toggling of tests that are accepted?",
		                "type": "boolean",
		                "default": true
		            },
		            "toggle_line_numbers": {
		                "description": "Enable toggling of line numbers?",
		                "type": "boolean",
		                "default": true
		            }
		        }
            }        
        }
    },
    "TestBase": {
        "type": "object",
        "allOf": [
            { "$ref": "#/Base" },
            { "$ref": "#/Acceptance" }
        ]
    },
    "TestGroupBase": {
        "type": "object",
        "allOf": [
            { "$ref": "#/TestBase" },
            { "$ref": "#/RuntimeMetrics" },
            { "$ref": "#/Representation" }
        ]
    }
}
